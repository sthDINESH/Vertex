---
sprint: 2
milestone: "sprint-2"
issues:
  - title: "[Sprint 2] User Story: Quiz Generation from Prerequisite Concepts"
    labels:
      - sprint-2
      - user-story
      - must-have
      - backend
      - ai
    body: |
      ## User Story
      **As a** learner
      **I want to** take quizzes on prerequisite concepts
      **So that I can** validate my understanding and identify knowledge gaps

      ## Acceptance Criteria
      - [ ] User can click "Test Knowledge" on any tree node
      - [ ] Quiz modal opens with 3 multiple-choice questions
      - [ ] Questions are generated by AI (Gemini API) based on concept and description
      - [ ] Quiz questions vary in difficulty based on education level
      - [ ] Questions are formatted as valid JSON with correct answer
      - [ ] No console errors during quiz generation or display

      ## Tasks
      - [ ] **Backend - Quiz Prompt Engineering**
        - [ ] Create quiz generation prompt template
        - [ ] Include concept name, description, and education level in prompt
        - [ ] Design prompt to return exactly 3 questions with 4 options each
        - [ ] Include correct answer index in response
        - [ ] Test prompt with various concepts and levels

      - [ ] **Backend - Quiz API Endpoint**
        - [ ] Create POST `/api/ai/generate-quiz` endpoint
        - [ ] Accept request body: `{ concept, description, level }`
        - [ ] Call Gemini API with quiz prompt
        - [ ] Parse and validate JSON response
        - [ ] Return structured quiz data to frontend
        - [ ] Handle API failures and timeouts gracefully

      - [ ] **Frontend - Quiz Modal Component**
        - [ ] Create QuizModal component (opens on "Test Knowledge" click)
        - [ ] Display question counter (1/3, 2/3, 3/3)
        - [ ] Show progress bar reflecting question progress
        - [ ] Render question text
        - [ ] Render 4 radio button options
        - [ ] Disable "Next" button until option selected
        - [ ] Navigate between questions with "Next" button
        - [ ] Show "Submit" button on final question

      - [ ] **Frontend - Quiz State Management**
        - [ ] Store current question index in local state
        - [ ] Store selected answers in array format
        - [ ] Clear state when modal closes or new quiz starts
        - [ ] Prevent accidental modal closure while answering

      - [ ] **Testing**
        - [ ] Test quiz generation for foundational level concepts
        - [ ] Test quiz generation for intermediate level concepts
        - [ ] Test quiz generation for advanced level concepts
        - [ ] Verify JSON response is valid and contains 3 questions
        - [ ] Test with very long concept names (edge case)
        - [ ] Test API timeout handling (simulate slow response)
        - [ ] Test quiz UI on mobile (375px) and desktop (1920px)
        - [ ] Verify no API keys exposed in network requests

      ## Definition of Done
      - [ ] All acceptance criteria met
      - [ ] Code reviewed and approved
      - [ ] No console errors or warnings
      - [ ] Unit tests passing (quiz generation logic)
      - [ ] Manual testing completed across browsers
      - [ ] Documentation updated (API contract, component props)

  - title: "[Sprint 2] User Story: Answer Validation and Scoring"
    labels:
      - sprint-2
      - user-story
      - must-have
      - frontend
    body: |
      ## User Story
      **As a** student
      **I want to** submit my quiz answers and see if I passed
      **So that I can** know if I've mastered a prerequisite concept

      ## Acceptance Criteria
      - [ ] User can submit quiz after answering all 3 questions
      - [ ] Correct answers are validated against AI-provided answer key
      - [ ] Pass threshold is 2/3 correct (66.7%)
      - [ ] User sees immediate pass/fail result
      - [ ] Pass/fail result displays with clear visual feedback (âœ“ or âœ—)
      - [ ] Passing concepts show green success state
      - [ ] Failing concepts show red error state
      - [ ] Results persist in session (not lost on modal close)

      ## Tasks
      - [ ] **Frontend - Answer Validation Logic**
        - [ ] Create `validateAnswers(userAnswers, correctAnswers)` function
        - [ ] Compare user selected indices with correct answer indices
        - [ ] Calculate score (number of correct answers)
        - [ ] Determine pass/fail based on 2/3 threshold
        - [ ] Return structured result: `{ passed: boolean, score: number, total: 3 }`
        - [ ] Write unit tests for validation function

      - [ ] **Frontend - Results Display Component**
        - [ ] Create results summary showing score (e.g., "2/3 Correct")
        - [ ] Display checkmark (âœ“) for passed, X (âœ—) for failed
        - [ ] Show "Passed" badge if 2/3 correct
        - [ ] Show "Failed" badge if <2/3 correct
        - [ ] Display encouraging message on pass, supportive message on fail
        - [ ] Include button to close modal and return to tree

      - [ ] **Frontend - Quiz State Update**
        - [ ] Store quiz results in component state after submission
        - [ ] Update parent TreeView with quiz result for that node
        - [ ] Trigger tree node color change (green=passed, red=failed)
        - [ ] Update progress counter on tree (e.g., "2/7 concepts tested")

      - [ ] **Frontend - Quiz Modal Auto-close**
        - [ ] Auto-close results modal after 2 seconds on pass
        - [ ] Show countdown timer before auto-close ("Closing in 2s...")
        - [ ] Allow user to close manually before auto-close triggers
        - [ ] Update tree view immediately after quiz completion

      - [ ] **Testing**
        - [ ] Test validation with all correct answers (should pass)
        - [ ] Test validation with 2/3 correct (should pass)
        - [ ] Test validation with 1/3 correct (should fail)
        - [ ] Test validation with 0/3 correct (should fail)
        - [ ] Test results persist during session
        - [ ] Test node status updates in tree after quiz
        - [ ] Test modal auto-closes on pass
        - [ ] Test manual close button works on fail

      ## Definition of Done
      - [ ] All acceptance criteria met
      - [ ] Code reviewed and approved
      - [ ] Validation logic has >90% test coverage
      - [ ] No console errors
      - [ ] Works on mobile and desktop
      - [ ] Tree node status updates correctly

  - title: "[Sprint 2] User Story: Personalized Study Resources"
    labels:
      - sprint-2
      - user-story
      - must-have
      - backend
      - ai
    body: |
      ## User Story
      **As a** learner
      **I want to** see study resources for concepts I failed
      **So that I can** know what to study to improve my understanding

      ## Acceptance Criteria
      - [ ] Study resources are generated only for failed quiz concepts
      - [ ] Resources include videos, articles, interactive tools, textbooks
      - [ ] Each resource has: title, description, platform, estimated time
      - [ ] Resources match the user's education level
      - [ ] Resource list shows 2-4 recommendations per concept
      - [ ] Resources appear on learning path results page
      - [ ] Resources load within 3 seconds per concept
      - [ ] Resources are prioritized (most helpful first)

      ## Tasks
      - [ ] **Backend - Resource Prompt Engineering**
        - [ ] Create resource recommendation prompt template
        - [ ] Include concept name, description, level in prompt
        - [ ] Design prompt to return 3-4 diverse resources
        - [ ] Request JSON format with: type, title, description, platform, estimatedTime
        - [ ] Test prompt with various concepts and education levels

      - [ ] **Backend - Resource API Endpoint**
        - [ ] Create POST `/api/ai/generate-resources` endpoint
        - [ ] Accept request body: `{ concept, description, level }`
        - [ ] Call Gemini API with resource recommendation prompt
        - [ ] Parse and validate JSON response
        - [ ] Return structured resource data to frontend
        - [ ] Handle API failures gracefully with fallback message

      - [ ] **Frontend - Learning Path Results Page**
        - [ ] Create LearningPathResults component
        - [ ] Display heading: "Based on your assessment, focus on these concepts first"
        - [ ] List failed concepts in priority order (numbered 1, 2, 3...)
        - [ ] Show concept name, description, and difficulty level for each
        - [ ] Include collapsible sections for each concept

      - [ ] **Frontend - Resource Card Component**
        - [ ] Create ResourceCard component (displays single resource)
        - [ ] Show resource type icon (ðŸŽ¥ video, ðŸ“„ article, ðŸ’» interactive, ðŸ“– textbook)
        - [ ] Display resource title, description, platform, estimated time
        - [ ] Make cards clickable to open resource in new tab
        - [ ] Style cards with consistent spacing and typography

      - [ ] **Frontend - Study Tip Display**
        - [ ] Display "ðŸ’¡ Study Tip:" for each failed concept (if provided by AI)
        - [ ] Show key topics list (highlighted topics to focus on)
        - [ ] Format as bullet points or tags
        - [ ] Help user prioritize what to study

      - [ ] **Frontend - Resources Loading State**
        - [ ] Show loading spinner while resources generate
        - [ ] Display message: "Generating personalized study resources..."
        - [ ] Prevent user from closing page during loading
        - [ ] Handle timeout (show error message after 10 seconds)

      - [ ] **Testing**
        - [ ] Test resource generation for foundational level
        - [ ] Test resource generation for advanced level
        - [ ] Verify response contains 3-4 resources with all required fields
        - [ ] Test with multiple failed concepts (batch generation)
        - [ ] Test resource links open correctly
        - [ ] Test loading state displays and completes
        - [ ] Test error handling (API timeout, malformed response)
        - [ ] Test responsiveness on mobile (card layout stacks vertically)

      ## Definition of Done
      - [ ] All acceptance criteria met
      - [ ] Code reviewed and approved
      - [ ] Resources load within 3 seconds
      - [ ] No console errors
      - [ ] Works on mobile and desktop
      - [ ] Prompt engineering tested with diverse concepts

  - title: "[Sprint 2] Task: Quiz Progress Indicator and Visual Feedback"
    labels:
      - sprint-2
      - task
      - should-have
      - frontend
    body: |
      ## Description
      Implement visual progress indicators in quiz modal and enhance user feedback

      ## Requirements
      - [ ] Progress bar shows 33%, 66%, 100% as user progresses through questions
      - [ ] Question counter displays "Question 1 of 3", "Question 2 of 3", etc.
      - [ ] Progress bar color changes on submit (question completed)
      - [ ] Smooth transition animation for progress bar
      - [ ] Current question number highlights in progress indicator
      - [ ] Disable "Next" button until answer selected
      - [ ] "Submit" button appears on final question (replace "Next")
      - [ ] Visual feedback when option selected (highlight selected radio button)

      ## Acceptance Criteria
      - [ ] Progress bar is visible and accurate
      - [ ] Question counter matches actual question position
      - [ ] All visual transitions are smooth (no jerky animation)
      - [ ] Progress indicator is responsive on mobile
      - [ ] Animations don't cause performance issues (60fps)

      ## Tasks
      - [ ] Create progress bar component with percentage display
      - [ ] Update progress bar as user navigates questions
      - [ ] Add question counter text and styling
      - [ ] Implement smooth CSS transitions for progress animation
      - [ ] Style selected radio button with visual highlight
      - [ ] Disable/enable buttons based on quiz state
      - [ ] Test on mobile and desktop
      - [ ] Performance test animations (DevTools Performance tab)

      ## Definition of Done
      - [ ] All requirements met
      - [ ] Code reviewed
      - [ ] No layout shifts or jank
      - [ ] Responsive on all screen sizes
      - [ ] Accessibility: keyboard navigation works

  - title: "[Sprint 2] Task: Retake Quiz Functionality"
    labels:
      - sprint-2
      - task
      - must-have
      - frontend
    body: |
      ## Description
      Allow users to retake a quiz if they failed, enabling them to improve their score

      ## Requirements
      - [ ] Failed quiz nodes display "Retake Quiz" button
      - [ ] Passed quiz nodes display "Passed âœ“" (not retakeable)
      - [ ] Clicking "Retake Quiz" generates a new set of 3 questions
      - [ ] Previous answers are cleared when retaking
      - [ ] User can retake unlimited times
      - [ ] Quiz results update in tree after retake
      - [ ] Loading state shown while new questions generate

      ## Acceptance Criteria
      - [ ] "Retake Quiz" button appears only on failed nodes
      - [ ] New questions are different from previous attempt
      - [ ] Previous score is replaced with new score
      - [ ] Passed nodes become locked (no retake option)
      - [ ] Tree updates immediately after retake submission

      ## Tasks
      - [ ] Add conditional rendering for "Retake Quiz" button on failed nodes
      - [ ] Create function to clear quiz state on retake
      - [ ] Generate new quiz questions (call API again)
      - [ ] Show loading state during question generation
      - [ ] Update tree node status after retake
      - [ ] Test retake on multiple nodes
      - [ ] Test passed nodes show locked state
      - [ ] Test loading spinner appears and completes

      ## Definition of Done
      - [ ] All requirements met
      - [ ] Code reviewed
      - [ ] Retake works reliably
      - [ ] Tree updates correctly
      - [ ] No console errors

  - title: "[Sprint 2] Task: Backend Error Handling for Quiz API"
    labels:
      - sprint-2
      - task
      - must-have
      - backend
    body: |
      ## Description
      Implement robust error handling for quiz and resource generation endpoints

      ## Requirements
      - [ ] Handle Gemini API timeouts (>5 seconds)
      - [ ] Handle malformed JSON responses from AI
      - [ ] Handle rate limiting errors (429 status)
      - [ ] Handle server errors (5xx)
      - [ ] Provide user-friendly error messages
      - [ ] Log all errors for debugging
      - [ ] Return appropriate HTTP status codes
      - [ ] Implement retry logic for transient failures

      ## Acceptance Criteria
      - [ ] Timeout error: "Taking longer than expected. Please try again."
      - [ ] Malformed response: "Quiz generation failed. Please try again."
      - [ ] Rate limit error: "Too many requests. Please try again in 1 minute."
      - [ ] Server error: "Server error. Our team has been notified."
      - [ ] All errors logged to console (development) or monitoring service (production)
      - [ ] Errors don't crash the app

      ## Tasks
      - [ ] Create error handling middleware for quiz endpoints
      - [ ] Add timeout handler (max 5 seconds)
      - [ ] Add JSON validation for AI responses
      - [ ] Add rate limiting check and response
      - [ ] Create error response formatter (consistent error format)
      - [ ] Add console logging for development
      - [ ] Add Sentry integration for production (optional)
      - [ ] Test each error scenario manually

      ## Definition of Done
      - [ ] All error scenarios handled
      - [ ] Appropriate status codes returned
      - [ ] User-friendly error messages
      - [ ] Code reviewed
      - [ ] Tested with error simulations

  - title: "[Sprint 2] Task: Frontend Error Handling and User Messaging"
    labels:
      - sprint-2
      - task
      - must-have
      - frontend
    body: |
      ## Description
      Implement error handling on frontend for quiz and resource generation

      ## Requirements
      - [ ] Display error toast when quiz generation fails
      - [ ] Display error toast when resources fail to generate
      - [ ] Error messages are clear and actionable
      - [ ] "Retry" button appears in error messages
      - [ ] User can dismiss error messages
      - [ ] Errors don't leave UI in broken state

      ## Acceptance Criteria
      - [ ] Error toast appears at top of screen
      - [ ] Error auto-dismisses after 5 seconds
      - [ ] Error includes "Retry" and "Dismiss" buttons
      - [ ] Clicking "Retry" retries the failed operation
      - [ ] Quiz modal closes on error (allows user to try different node)
      - [ ] Network error message: "Connection failed. Check internet and try again."
      - [ ] Timeout message: "Taking too long. Please try again."

      ## Tasks
      - [ ] Create error toast component (if not exists)
      - [ ] Add try-catch blocks around API calls
      - [ ] Display appropriate error messages based on error type
      - [ ] Add retry functionality for failed operations
      - [ ] Test error handling with network disabled
      - [ ] Test error handling with slow network (DevTools throttling)
      - [ ] Verify toast displays correctly on mobile
      - [ ] Test error state doesn't leave modal broken

      ## Definition of Done
      - [ ] All error scenarios show user feedback
      - [ ] Errors are actionable
      - [ ] Code reviewed
      - [ ] Tested with poor network conditions
      - [ ] Mobile responsive

  - title: "[Sprint 2] Task: Quiz UI Mobile Optimization"
    labels:
      - sprint-2
      - task
      - should-have
      - frontend
    body: |
      ## Description
      Optimize quiz modal and results UI for mobile devices

      ## Requirements
      - [ ] Quiz modal is full-screen on mobile (<768px)
      - [ ] Quiz modal is centered overlay on desktop (>768px)
      - [ ] Touch targets are minimum 44x44px (mobile)
      - [ ] Questions text is readable on small screens
      - [ ] Radio buttons are easy to tap (large hit area)
      - [ ] Progress bar is visible and readable
      - [ ] Results page is single column on mobile
      - [ ] Resource cards stack vertically on mobile

      ## Acceptance Criteria
      - [ ] Quiz works on 375px width (iPhone SE)
      - [ ] Quiz works on 768px width (iPad)
      - [ ] Quiz works on 1920px width (desktop)
      - [ ] All buttons are easily tappable
      - [ ] No horizontal scrolling on any screen size
      - [ ] Text is readable without zoom
      - [ ] No layout shift when results appear

      ## Tasks
      - [ ] Test quiz modal on mobile (use DevTools or real device)
      - [ ] Adjust modal styling for mobile (full-screen vs centered)
      - [ ] Increase touch target sizes for radio buttons
      - [ ] Test text readability and font sizes
      - [ ] Test resource cards on mobile layout
      - [ ] Remove horizontal scroll if present
      - [ ] Test on real mobile device (iOS and Android)

      ## Definition of Done
      - [ ] Tested on 3+ screen sizes
      - [ ] All touch targets >=44x44px
      - [ ] No horizontal scrolling
      - [ ] Text readable without zoom
      - [ ] Code reviewed
      - [ ] Works on real mobile device

  - title: "[Sprint 2] Task: Quiz and Resource Prompt Documentation"
    labels:
      - sprint-2
      - task
      - should-have
      - backend
      - documentation
    body: |
      ## Description
      Document AI prompts used for quiz and resource generation

      ## Requirements
      - [ ] Document quiz generation prompt template
      - [ ] Document resource recommendation prompt template
      - [ ] Explain prompt variables and expected AI response format
      - [ ] Include example requests and responses
      - [ ] Document JSON schema for quiz and resource responses
      - [ ] Explain AI model configuration (temperature, max_tokens, etc.)
      - [ ] Document any edge cases or limitations

      ## Acceptance Criteria
      - [ ] Prompts are clearly documented
      - [ ] Examples are realistic and tested
      - [ ] JSON schemas are valid and match actual responses
      - [ ] Documentation is in README or dedicated file
      - [ ] Team member can understand and modify prompts

      ## Tasks
      - [ ] Create `PROMPTS.md` in backend folder
      - [ ] Document quiz prompt with example
      - [ ] Document resource prompt with example
      - [ ] Include actual AI response examples
      - [ ] Document JSON response schemas
      - [ ] Explain how to test and debug prompts
      - [ ] Document temperature and token settings
      - [ ] Get review from team

      ## Definition of Done
      - [ ] Comprehensive documentation created
      - [ ] Examples are accurate and realistic
      - [ ] Team review completed
      - [ ] Added to main README

  - title: "[Sprint 2] Task: Manual Testing Plan for Assessment System"
    labels:
      - sprint-2
      - task
      - must-have
      - testing
    body: |
      ## Description
      Create and execute comprehensive manual testing plan for Sprint 2 features

      ## Test Scenarios
      - [ ] **Happy Path: Quiz Success**
        - [ ] Select node â†’ click "Test Knowledge"
        - [ ] Answer all 3 questions correctly
        - [ ] See "Passed âœ“" result and encouraging message
        - [ ] Modal auto-closes, node turns green
        - [ ] Verify "Retake Quiz" button appears (if test allows retake)

      - [ ] **Happy Path: Quiz Failure & Retake**
        - [ ] Select node â†’ take quiz
        - [ ] Answer 1/3 correctly (fail)
        - [ ] See "Failed âœ—" result with helpful message
        - [ ] Click "Retake Quiz"
        - [ ] New questions appear
        - [ ] Answer new set, verify results update

      - [ ] **Resource Generation**
        - [ ] Complete quiz and fail
        - [ ] Navigate to "View Learning Path"
        - [ ] See failed concepts listed with resources
        - [ ] Verify resources are relevant
        - [ ] Click resource link â†’ opens in new tab
        - [ ] Verify resource platform and type

      - [ ] **Error Scenarios**
        - [ ] Disconnect internet â†’ try quiz
        - [ ] See error message â†’ click retry
        - [ ] Reconnect â†’ quiz succeeds
        - [ ] Slow network â†’ see loading spinner
        - [ ] Close modal during loading â†’ modal closes gracefully

      - [ ] **Mobile Testing**
        - [ ] Open quiz on iPhone/Android
        - [ ] Questions display readably
        - [ ] Radio buttons are easy to tap
        - [ ] Progress bar visible
        - [ ] Results page scrollable (no overflow)
        - [ ] "View Learning Path" is accessible on mobile

      ## Testing Checklist
      - [ ] Test on Chrome, Firefox, Safari
      - [ ] Test on mobile (375px), tablet (768px), desktop
      - [ ] Test with various concepts (short, long, special characters)
      - [ ] Test with all education levels (HS, UG, Grad)
      - [ ] Check console for errors
      - [ ] Verify API calls in Network tab
      - [ ] Test accessibility (tab navigation, screen reader)

      ## Definition of Done
      - [ ] All test scenarios completed
      - [ ] Results documented
      - [ ] Bugs logged in GitHub Issues
      - [ ] No critical issues remain

---